<!DOCTYPE html>
<html>
<head>
    <title>jihuaguanli.html</title>
    <meta charset="utf-8">
    <meta name="keywords" content="keyword1,keyword2,keyword3">
    <meta name="description" content="this is my page">
    <meta name="content-type" content="text/html; charset=UTF-8">
    <link href="/static/css/bootstrap.min14ed.css?v=3.3.6" rel="stylesheet">
    <link href="/static/css/font-awesome.min93e3.css?v=4.4.0"
          rel="stylesheet">
    <link href="/static/css/plugins/bootstrap-table/bootstrap-table.min2.css"
          rel="stylesheet">
    <link href="/static/css/animate.min.css" rel="stylesheet">
    <link href="/static/css/style.min862f.css?v=4.1.0" rel="stylesheet">
    <link href="/static/css/parseIcon/iconfont.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/jquery.searchableSelectparse.css">
    <link href="/static/css/iconfont/iconfont.css" rel="stylesheet">
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/layui/css/layui.css"  media="all">
    <link rel="stylesheet"  href="/static/css/bootstrap-select.min.css">
    <link href="/static/css/bootstrap-treeview.min.css" rel="stylesheet">
    <script src="/static/js/jquery.min.js?v=2.1.4"></script>
    <script src="/static/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="/static/js/content.min.js?v=1.0.0"></script>
    <script src="/static/js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
    <script
            src="/static/js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
    <script
            src="/static/js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
    <script src="/static/17com/js/echarts.js"></script>
    <script src="/static/js/plugins/laydate/laydate.js"></script>
    <script src="/static/js/jquery.searchableSelectparse.js"></script>
    <script src="/static/js/jedate.js"></script>
    <link href="/static/css/skin/jedate.css" rel="stylesheet">
    <link href="/static/css/achievement/manage.css" rel="stylesheet">
    <script src="/static/layui/layui.js" charset="utf-8"></script>
    <script src="/static/js/bootstrap-select.min.js"></script>
    <script src="/static/17com/plugins/bootstrap-treeview-master/public/js/bootstrap-treeview.js"></script>
    <link rel="stylesheet"  href="/static/js/plugins/webuploader/webuploader.css">
    <script src="/static/js/plugins/webuploader/webuploader.min.js"></script>
    <script src="/static/js/news.js"></script>
    <style>
        input[type=range] {
            margin-top: 8px;
            outline: none;
            -webkit-appearance: none; /*清除系统默认样式*/
            width: 80% !important;
            background: #e7eaec;
            height: 3px; /*横条的高度*/
        }
        /*拖动块的样式*/
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none; /*清除系统默认样式*/
            height: 16px; /*拖动块高度*/
            width: 16px; /*拖动块宽度*/
            background: #0099CC; /*拖动块背景*/
            border-radius: 50%; /*外观设置为圆形*/
            border: solid 1px #ddd
        }

        #text {
            white-space: normal;
            word-break: break-all;
            word-wrap: break-word;
        }
        .czbtn{
            cursor:default;
        }
        .czbtn2{
            cursor:pointer;
        }
        .my-container {
            float: left;
            display: inline-block;
        }

        .myLabel-content, .myText-content, .myBtn-content {
            float: left;
            display: inline-block;
            line-height: 30px;

        }

        .myLabel-content, .myText-content input[type='text'], .myBtn-content .btn
        {
            height: 30px;
            font-size: 12px;
            font-weight: normal;
        }

        .myBtn-content .btn {
            margin-bottom: 10px;
        }

        /* 模态框 */

        .hourdiv {
            width: 138px;
        }
        #fbyjbox  tr{
            margin-top:10px;
        }
        #fbyjbox2  tr{
            margin-top:10px;
        }
        #fbyjbox3  tr{
            margin-top:10px;
        }
        .yjbox{
            width: 181px;
            height: 32px;
            line-height:32px;
            border: 1px solid #D9D9D9;
            float:left;
            padding-left: 12px;
        }
        .yeji {
            font-family: FangSong;
            font-size: 13px;
            font-weight: 400;
            color: rgba(88,88,88,1);
            height: 32px;
            line-height: 32px;
            width: 67px;
            float: left;
            margin-left: 15px;
            /* margin-left: -21px; */
        }
        .yeji2 {
            font-family: FangSong;
            font-size: 13px;
            font-weight: 400;
            color: rgba(88,88,88,1);
            height: 32px;
            line-height: 32px;
            width: 67px;
            float: left;
            margin-left: 32px;
            /* margin-left: -21px; */
        }

        .yejibigtext {
            width: 461px;
            height: 99px;
            float: left;
            border: 1px solid #D9D9D9;
            padding-left: 15px;
            padding-top: 3px;
        }
        .yejibigtextyjnr {
            padding-top: 3px;
            padding-left: 5px;
            width: 461px;
            height: 99px;
            margin-left: -16px;
            margin-top: -4px;
            border: 1px solid #D9D9D9;
        }
        .yjtext {
            width: 136px;
            height: 23px;
            margin-left: 8px;
            margin-top: 4px;
            font-size: 14px;
            font-family: FangSong;
            font-weight: 400;
            color: rgba(124,124,124,1);
            line-height: 19px;
        }

        .gzsc {
            margin-left: 4%;
        }

        .yejimidtext {
            width: 461px;
            height: 32px;
            border: 1px solid #D9D9D9;
        }
        .fbsmbox{
            width: 461px;
            height: 44px;
            border: 1px solid #D9D9D9;
            float: left;
            padding-left: 12px;
        }
        /* 按钮 */
        .btnn {
            width: 59px;
            height: 31px;
            /* border-radius: 10px; */
            background-color: #F5F5F6;
            float: left;
            margin-left:10px;
            color:#73777A;
            outline:none;
            text-align:center;
            font-family: cursive;
            line-height:31px;
        }
        /* 按钮点击事件 */
        .btnn:link{
            background-color: #0099CC;
            color:white;
        }
        .btnn:hover{
            background-color: #0099CC;
            color:white;
        }
        .btnn:active{
            background-color: #0099CC;
            color:white;
        }
        .btnn:visited{
            background-color: #0099CC;
            color:white;
        }

        .btndiv {
            position: relative;
            left: 72%;
            top: -10%;
            float: left;
        }
        .btndiv2 {
            position: relative;
            left: 63%;
            top: 2%;
            float: left;
        }
        .btndiv3 {
            position: relative;
            left: 63%;
            top: 2%;
            float: left;
        }
        .btndiv4 {
            position: relative;
            left: 63%;
            top: 2%;
            float: left;
        }
        .hour1 {
            font-size: 15px;
            width: 7%;
            color: #D9D9D9;
            float:right;
        }
        .hoursh {
            font-size: 15px;
            position: absolute;
            left: 40.5%;
            top: 12%;
            width: 7%;
            color: #D9D9D9;
        }
        .hoursh2 {
            font-size: 15px;
            position: absolute;
            left: 86.5%;
            top: 12%;
            width: 9%;
            color: #D9D9D9;
        }
        .hour {
            width: 18px;
            float: left;
            margin-left: -21px;
            margin-top: 8px;
        }
        .tjfj11{

        }
        .fb {
            font-family: FangSong;
            margin-left: -6px;
            /* margin-top: 10px; */
            margin-bottom: 8px;
            color: rgba(51,51,51,1);
            font-weight: 400;
            border-bottom: 1px solid #E5E5E5;
            width: 581px;
            height: 26px;
        }
        .qr {
            margin-left: -2.77%;
            /* margin-bottom: 11px; */
            border-bottom: 1px solid #E5E5E5;
            width: 105.4%;
            height: 10px;
            font-size: 8px;
            font-family: FangSong;
            font-weight: 400;
            color: rgba(51,51,51,1);
        }


        .hour2 {
            font-size: 15px;
            float:right;
            width: 9%;
            color: #D9D9D9;
        }

        .everydiv{
            margin-top:10px;
        }
        .com {
            cursor: pointer;
            width: 316px;
            background-repeat: no-repeat;
            background-position: 99% center;
            background-size: 18px;
        }
        .com2 {
            cursor: pointer;
            width: 316px;
            background-repeat: no-repeat;
            background-position: 93% center;
            background-size: 18px;
        }

        /* 确认业绩 */
        .qrdiv {
            margin-left: -2.77%;
            /* margin-bottom: 11px; */
            border-bottom: 1px solid #E5E5E5;
            width: 105.4%;
            height: 17px;
            font-size: 17px;
            font-family: FangSong;
            font-weight: 400;
            color: rgba(51,51,51,1);
        }
        .modal-contentqryj {
            /*  margin-left: 420px;
             margin-top: -10px; */
            width: 591px;
            background-clip: padding-box;
            background-color: #FFF;
            border: 1px solid rgba(0,0,0,0);
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,.3);
            outline: 0 none;
        }
        .qryj{
            float:left;
        }
        .qryjbigbox {
            width: 557px;
            height: 233px;
            background: rgba(244,251,255,1);
            box-shadow: 0px 1px 15px 0px rgba(231,231,231,0.88);
            /*margin-left: -14px;*/
            margin-top: 15px;
        }

        .qryjbigbox2{
            /* border: 1px red solid;  */
            width: 613px;
            height:172px;
            margin-left: -15px;
        }
        .qryjbox {
            /*  border: 1px red solid;  */
            width: 77%;
            /* margin-top: 6%; */
            margin-top: 4px;
            height: 45px;
            margin-left: 10px;
        }
        .qryjbox2{

        }
        .yqryjword {
            margin-left: 23px;
            height: 12px;
            line-height: 26px;
        }
        .qryjword {
            font-family: FangSong;
            font-size: 14.5px;
            font-weight: 400;
            color: rgba(159,159,159,1);
            width: 79px;
            float: left;
            height: 12px;
            line-height: 26px;
            margin-left: 2px;
        }
        .qryjword1{
            font-family: FangSong;
            font-size: 14.5px;
            font-weight: 400;
            color:rgba(159,159,159,1);
            line-height:31px;
            width: 79px;
            float:left;
            margin-left: 2px;
        }
        .shortdiv {
            width: 174px;
            height: 29px;
            height: 30px;
            line-height: 30px;
            float: left;
            border: 1px solid rgba(217,217,217,1);
            border-radius: 1px;
            font-family: FangSong;
            padding-left: 12px;
        }
        .longdiv {
            width: 300px;
            height: 35px;
            border:1px solid rgba(217,217,217,1);
            border-radius:1px;
            float: right;
            margin-right: -123px;
        }
        .llongdiv {
            width: 454px;
            height: 30px;
            line-height: 35px;
            border: 1px solid #D9D9D9;
            float: right;
            margin-right: -107px;
            font-family: FangSong;
            padding-left: 12px;
        }
        .timecom{
            cursor: pointer;
            width: 171px;
            height: 35px;
            background-repeat: no-repeat;
            background-position: 99% center;
            background-size: 18px;
            border: 1px solid #ccc;
            /*  background-image: url(icon.png); */
        }
        /* 完成业绩css */
        .wcqryjword {
            font-family: FangSong;
            font-size: 14.5px;
            font-weight: 400;
            font-weight: 400;
            color: rgba(0,0,0,1);
            width: 79px;
            float: left;
            height: 12px;
            line-height: 26px;
        }
        .wcyjbox {
            /*  border: 1px red solid;  */
            width: 77%;
            /* margin-top: 6%; */
            margin-top: 4px;
            height: 38px;
            margin-left: 10px;
        }
        .shyjbox{
            /* border: 1px red solid; */
            width: 77%;
            /* margin-top: 6%; */
            margin-top: 4px;
            height: 41px;
            margin-left: 10px;
        }
        .divleft{
            float: left;
        }
        .divright{
            margin-left: 9%;
            float: left;
        }
        /* 进度条 */
        .progress{position: relative; width:300px;margin:100px auto;}
        .progress_bg{height: 10px; border: 1px solid #ddd; border-radius: 5px; overflow: hidden;background-color:#f2f2f2;}
        .progress_bar{background: #00C1DE; width: 0; height: 10px; border-radius: 5px;}
        .progress_btn{width: 20px; height: 20px; border-radius: 5px; position: absolute;background:#fff;
            left: 0px; margin-left: -10px; top:-5px; cursor: pointer;border:1px #ddd solid;box-sizing:border-box;}
        .progress_btn:hover{border-color:#F7B824;}
        /* 审核业绩 */
        .divrightsh{
            margin-left: 10%;
            float: left;
        }
        ::-ms-browse, [type='file'] {
            padding: .4em;
            line-height: 10px;
            border: 1px solid #D9D9D9;
            background: #f0f3f9;
            color: rgba(88,88,88,1);
        }
        ::-webkit-file-upload-button {
            padding: .4em;
            line-height: 10px;
            border: 1px solid #D9D9D9;
            background: #f0f3f9;
            color: rgba(88,88,88,1);
        }

        /* 发布业绩 */
        .everybox{
            width:100%;
            /* border:1px red solid; */
            height:36px;
            margin-top: 11px;
        }

        .everybox2{
            width:100%;
            /* border:1px red solid; */
            height:100px;
            margin-top: 6px;
        }

        /* 业绩完成 */
        .layui-input{
            padding-left: 4px;
        }

        /* 所属部门 */
        .filter-option-inner-inner{
            font-family: fangsong;
        }
        /* 分页 */
        .fixed-table-pagination .pagination-detail, .fixed-table-pagination div.pagination {
            margin-left: 2%;
            margin-top: 10px;
            margin-bottom: 10px;
        }
        .layui-slider {
            height: 4px;
            background: #e2e2e2;
            border-radius: 3px;
            position: relative;
            cursor: pointer;
            margin-right: 90px !important;
        }
    </style>


</head>
<body>
<div id="big" class="col-sm-12" style="display: none">
    <div class="example-wrap" style="margin-top: 25px;">

        <!-- 顶部筛选框 -->
        <div id="toolbar1"
             style="width: 100%; overflow: hidden; margin-bottom: 14px; float: left;">
            <div class="myText-content" style="float: left;width: 9%;cursor:pointer;">
                <label class="myLabel-content">类型:&nbsp;&nbsp;&nbsp;</label>
                <select
                        name="select" id="sxlx"
                        style="float: left; width: 52px; height: 33px; line-height: 35px; border: solid 1px #D9D9D9;;">
                    <option value="01">计划</option>
                    <option value="02">审核</option>
                </select>
            </div>

            <div class="myText-content" style="float: left;width: 11%;">
                <label class="myLabel-content">对象:&nbsp;&nbsp;&nbsp;</label>
                <input type="hidden" value="" id="dxid">
                <select name="select" id="sxry" class="chosen-select" data-placeholder="选择用户..." style="float: left; width: 70px; height: 33px; line-height: 35px; border: solid 1px #D9D9D9;">
                </select>
            </div>

            <div class="myText-content" style="float: left;width: 12%;cursor:pointer;">
                <label class="myLabel-content">计划状态:&nbsp;&nbsp;&nbsp;</label> <select
                    name="select" id="status"
                    style="float: left; width: 70px; height: 33px; line-height: 35px; border: solid 1px #D9D9D9;">
                <option value="00">全部</option>
                <option value="01">已发布</option>
                <option value="02">未通过</option>
                <option value="03">已完成</option>
                <option value="04">已通过</option>
                <option value="05">已总结</option>
            </select>
            </div>
            <!--签到状态-->
            <div class="myText-content" style="float: left;width: 12%;cursor:pointer;">
                <label class="myLabel-content">签到状态:&nbsp;&nbsp;&nbsp;</label> <select
                    name="select" id="clstatus"
                    style="float: left; width: 70px; height: 33px; line-height: 35px; border: solid 1px #D9D9D9;">
                <option value="00">全部</option>
                <option value="01">正常</option>
                <option value="02">迟到</option>
                <option value="03">未签到</option>
            </select>
            </div>
            <div class="myText-content" style="float: left;width: 10%;cursor:pointer;">
                <label class="myLabel-content">计划类型:&nbsp;&nbsp;&nbsp;</label> <select
                    name="select" id="plantype2"
                    style="float: left; width: 40px; height: 33px; line-height: 35px; border: solid 1px #D9D9D9;">
                <option value="01">日</option>
                <option value="02">周</option>
                <option value="03">月</option>
                <option value="04">年</option>
            </select>
            </div>
            <div class="my-container"
                 style="display: block;float: left;">
                <label class="myLabel-content" style="">日期：</label>
                <div class="myText-content" style="">
                    <input id="Begtime0"
                           class="com laydate-icon form-control layer-date"
                           placeholder="开始日期" style="width: 119px;margin-right: 10px;">
                </div>
            </div>
            <div class="my-container"
                 style="display: block;float: left;">
                <label class="myLabel-content">至</label>
            </div>
            <div class="my-container"
                 style="display: block;  float: left;">
                <label class="myLabel-content"></label>
                <div class="myText-content" style="margin-left: 10px;">
                    <input id="Endtime0"
                           class="com laydate-icon form-control layer-date"
                           placeholder="结束日期" style="width: 119px;">
                </div>
            </div>
            <div class="myBtn-content"
                 style="float: left;margin-left: 2%;">
                <button id="search1" type="button" class="btn btn-primary"
                        style="background-color: #0099CC;border-color: #0099CC;color: #FFF;" onclick="chaxunn()">查询</button>
                <button id="reset1" type="button" class="btn btn-default"
                        style="background-color: #c2c2c2; margin-left: 3px;border-color: #c2c2c2;color: #FFF;" onclick="chongzhii()">重置</button>
            </div>

            <div id="fabu"
                 style="float: right;width:76px;height:30px;background-color:#0099CC;margin-right: 10px;cursor:pointer;"
                 onclick="fabu()">
                <i class="iconfont icon-fabu"style="position: relative;top: 7px;left: 14px;color: white;" ><font style="font-size:10px;position: relative;top: -1px;left: 2px;">发布</font></i>
            </div>
        </div>
        <!-- 计划管理列表 -->
        <div class="example" id="paimingtable">
            <table id="table1"></table>
        </div>
        <!-- 发布计划-->
        <div id="modal-form" class="modal fade" aria-hidden="true">
            <div class="modal-dialog" style=" margin-left: -2%;">
                <div class="modal-content"  style="width:583px;">
                    <div class="modal-body" style="width:583px;;margin-left: -9px;margin-top: -5px;">

                        <div class="fb">
                            <p style="margin-left: 3%;margin-top: -2px;font-size: 18px;">计划发布</p>
                        </div>
                        <input type="hidden" id="issueid" value=""/>
                        <div style="width:100%;height:3px;"></div>
                        <div class="everybox"  id="fbyjbox" style="">
                            <div class="yeji">
                                计划业绩:
                            </div>
                            <div id="fbjhyj" class="yjbox" contenteditable="true" style="font-family: FangSong;" ></div>
                            <div class="hour">(h)</div>

                            <div class="yeji2" style="">
                                计划用时:
                            </div>
                            <div id="fbjhys" class="yjbox" contenteditable="true" style="
									    width: 181px;
									    border: 1px solid #D9D9D9;
									    height: 32px;
									    font-family: FangSong;
										line-height:32px;"></div>
                            <div class="hour">(h)</div>

                        </div>
                        <div style="width:100%;height:3px;"></div>
                        <div class="everybox2">
                            <div class="yeji ">计划内容:</div>
                            <div  style="" class="yejibigtext" >
                                <div id="yjnr" class="yejibigtextyjnr" style="font-family: FangSong;"contenteditable="true"
                                     onfocus="if(this.innerText=='添加您的计划内容...')this.innerText=''"
                                     onblur="if(this.innerText=='')this.innerText='添加您的计划内容...'">添加您的计划内容...</div>
                                <div class="tongji" style="float: right;font-size: 20px;margin-right: 10px;margin-top: -35px;">
                                    <div id="filePicker" style="font-size:14px;margin-top: 4px; "><span style="font-size: 13px;float: right;margin-top: 3px;">上传图片</span></div>
                                </div>
                            </div>
                        </div>
                        <div  class="uploader-list">
                            <ul id="fileList" style="padding-left: 17px;list-style:none;overflow: hidden;margin-bottom: 15px;"></ul>
                        </div>
                        <div style="width:100%;height:2px;"></div>
                        <div class="everybox">
                            <div class="yeji ">计划帮助:</div>
                            <div id="planning" class="fbsmbox" contenteditable="true" style="padding-top: 5px;
    padding-left: 5px;height:32px;font-family: FangSong;"></div>
                        </div>
                        <div style="width:100%;height:1px;"></div>
                        <div class="everybox">
                            <div class="yeji">计划类型:</div>
                            <div class="">
                                <select id="plantype" class="form-control  "
                                        style="width: 181px;height:32px;float: left;font-family: FangSong;">
                                    <option value="01">日</option>
                                    <option value="02">周</option>
                                    <option value="03">月</option>
                                    <option value="04">年</option>
                                </select>
                            </div>
                            <div class="yeji ">计划时间:</div>
                            <div class="">
                                <div class="my-container ">
                                    <div class="myText-content" style=" ">
                                        <input id="Searchtime"
                                               class="com laydate-icon form-control layer-date"
                                               placeholder="" value="" style="width:198px;height:32px;font-family: FangSong;">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div style="width:100%;height:0px;"></div>
                        <div style="width:100%;height:5px;"></div>
                        <div class="everybox2">
                            <div class="yeji ">计划说明:</div>
                            <div id="fbsm" class="fbsmbox" contenteditable="true" style="font-family: FangSong;padding-top: 5px;
    padding-left: 5px;"></div>
                        </div>
                        <div class="btndiv" style="margin-top: -37px;">
                            <div class="btnn" id="issue"  style="background-color:#0099CC;color:white;cursor:pointer;" onclick="issue()">发布</div>
                            <div onclick="cancal()" class="btnn" style=" border: 1px solid #EEEEEF;cursor:pointer;">取消</div>
                            <div></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <!--计划完成-->
        <div id="modal-form2" class="modal fade" aria-hidden="true">
            <div class="modal-dialog" style=" margin-left: -2%;">
                <div class="modal-content"  style="height: 567px;width:583px;">
                    <div class="modal-body" style="height: 471px;width: 627px;margin-left: -9px;margin-top: -5px;">

                        <div class="fb">
                            <p style="margin-left: 3%;margin-top: -2px;font-size: 18px;">完成计划</p>
                            <input type="hidden" id="comid" value=""/>
                        </div>
                        <div style="background: rgba(244,251,255,1);width: 570px;">
                        <div style="width:100%;height:3px;"></div>
                        <div class="everybox"  id="fbyjbox2" style="">
                            <div class="yeji">
                                计划业绩:
                            </div>
                            <div id="fbjhyj2" class="yjbox" style="font-family: FangSong;" ></div>
                            <div class="hour">(h)</div>

                            <div class="yeji2" style="">
                                计划用时:
                            </div>
                            <div id="fbjhys2" class="yjbox" style="
									    width: 181px;
									    border: 1px solid #D9D9D9;
									    height: 32px;
									    font-family: FangSong;
										line-height:32px;"></div>
                            <div class="hour">(h)</div>

                        </div>
                        <div style="width:100%;height:3px;"></div>
                        <div class="everybox">
                            <div class="yeji ">计划内容:</div>
                            <div id="yjnr2" class="fbsmbox" style="padding-top: 5px;
    padding-left: 5px;height:32px;font-family: FangSong;"></div>
                        </div>
                        <div style="width:100%;height:2px;"></div>
                        <div class="everybox">
                            <div class="yeji ">计划帮助:</div>
                            <div id="planning2" class="fbsmbox" style="padding-top: 5px;
    padding-left: 5px;height:32px;font-family: FangSong;"></div>
                        </div>
                        <div style="width:100%;height:1px;"></div>
                        <div class="everybox">
                            <div class="yeji">计划类型:</div>
                            <div id="plantype22" class="fbsmbox" style="padding-top: 5px;
    padding-left: 5px;height:32px;font-family: FangSong;"></div>
                        </div>
                        <div style="width:100%;height:0px;"></div>
                        <div class="everybox">
                            <div class="yeji ">计划时间:</div>
                            <div id="Searchtime2" class="fbsmbox" style="font-family: FangSong;padding-top: 5px;
    padding-left: 5px;"></div>
                        </div>
                        <div style="width:100%;height:5px;"></div>
                        <div class="everybox">
                            <div class="yeji ">计划说明:</div>
                            <div id="fbsm2" class="fbsmbox" style="font-family: FangSong;padding-top: 5px;
    padding-left: 5px;"></div>
                        </div>
                        </div>
                        <div style="width:100%;height:10px;"></div>
                        <div class="everybox"  style="">
                            <div class="yeji">
                                完成业绩:
                            </div>
                            <div id="complan" class="yjbox" contenteditable="true" style="font-family: FangSong;" ></div>
                            <div class="hour">(h)</div>

                            <div class="yeji2" style="">
                                实际用时:
                            </div>
                            <div id="comtime" class="yjbox" contenteditable="true" style="
									    width: 181px;
									    border: 1px solid #D9D9D9;
									    height: 32px;
									    font-family: FangSong;
										line-height:32px;"></div>
                            <div class="hour">(h)</div>
                        </div>
                        <div class="everybox2">
                            <div class="yeji ">完成说明:</div>
                            <div  style="" class="yejibigtext" >
                                <div id="comsm" class="yejibigtextyjnr" style="font-family: FangSong;"contenteditable="true"
                                     onfocus="if(this.innerText=='添加您的完成内容...')this.innerText=''"
                                     onblur="if(this.innerText=='')this.innerText='添加您的完成内容...'">添加您的业绩内容...</div>
                            </div>
                        </div>
                        <div class="btndiv" style="top: 4%;">
                            <div class="btnn" style="background-color:#0099CC;color:white;cursor:pointer;" onclick="complete()">完成</div>
                            <div onclick="cancal2()" class="btnn" style=" border: 1px solid #EEEEEF;cursor:pointer;">取消</div>
                            <div></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <!--计划审核-->
        <div id="modal-form3" class="modal fade" aria-hidden="true">
            <div class="modal-dialog" style=" margin-left: -2%;">
                <div class="modal-content"  style="width:583px;">
                    <div class="modal-body" style="width: 627px;margin-left: -9px;margin-top: -5px;">

                        <div class="fb">
                            <p style="margin-left: 3%;margin-top: -2px;font-size: 18px;">审核计划</p>
                            <input type="hidden" id="comid3" value=""/>
                            <input type="hidden" id="userid3" value=""/>
                        </div>
                        <div style="width:100%;height:3px;"></div>
                        <div style="background: rgba(244,251,255,1);width: 570px;">
                        <div class="everybox"  id="fbyjbox3" style="">
                            <div class="yeji">
                                计划业绩:
                            </div>
                            <div id="fbjhyj3" class="yjbox" style="font-family: FangSong;" ></div>
                            <div class="hour">(h)</div>

                            <div class="yeji2" style="">
                                计划用时:
                            </div>
                            <div id="fbjhys3" class="yjbox" style="
									    width: 181px;
									    border: 1px solid #D9D9D9;
									    height: 32px;
									    font-family: FangSong;
										line-height:32px;"></div>
                            <div class="hour">(h)</div>

                        </div>
                        <div style="width:100%;height:3px;"></div>
                        <div class="everybox">
                            <div class="yeji ">计划内容:</div>
                            <div id="yjnr3" class="fbsmbox" style="padding-top: 5px;
    padding-left: 5px;height:32px;font-family: FangSong;"></div>
                        </div>
                        <div style="width:100%;height:2px;"></div>
                        <div class="everybox">
                            <div class="yeji ">计划帮助:</div>
                            <div id="planning3" class="fbsmbox" style="padding-top: 5px;
    padding-left: 5px;height:32px;font-family: FangSong;"></div>
                        </div>
                        <div style="width:100%;height:1px;"></div>
                        <div class="everybox">
                            <div class="yeji">计划类型:</div>
                            <div id="plantype23" class="fbsmbox" style="padding-top: 5px;
    padding-left: 5px;height:32px;font-family: FangSong;"></div>
                        </div>
                        <div style="width:100%;height:0px;"></div>
                        <div class="everybox">
                            <div class="yeji ">计划时间:</div>
                            <div id="Searchtime3" class="fbsmbox" style="font-family: FangSong;padding-top: 5px;
    padding-left: 5px;"></div>
                        </div>
                        <div style="width:100%;height:5px;"></div>
                        <div class="everybox">
                            <div class="yeji ">计划说明:</div>
                            <div id="fbsm3" class="fbsmbox" style="font-family: FangSong;padding-top: 5px;
    padding-left: 5px;"></div>
                        </div>

                        <div class="everybox"  style="">
                            <div class="yeji">
                                完成业绩:
                            </div>
                            <div id="complan3" class="yjbox" style="font-family: FangSong;" ></div>
                            <div class="hour">(h)</div>

                            <div class="yeji2" style="">
                                实际用时:
                            </div>
                            <div id="comtime3" class="yjbox" style="
									    width: 181px;
									    border: 1px solid #D9D9D9;
									    height: 32px;
									    font-family: FangSong;
										line-height:32px;"></div>
                            <div class="hour">(h)</div>
                        </div>
                        <div class="everybox">
                            <div class="yeji ">完成说明:</div>
                            <div id="comsm3" class="fbsmbox" style="padding-top: 5px;
    padding-left: 5px;height:32px;font-family: FangSong;"></div>
                        </div>
                        </div>
                        <div style="width:100%;height:10px;"></div>
                        <div class="everybox"  style="">
                            <div class="yeji">
                                审核计划:
                            </div>
                            <div id="verplan" class="yjbox" contenteditable="true" style="font-family: FangSong;" ></div>
                            <div class="hour">(h)</div>

                            <div class="yeji2" style="">
                                审核用时:
                            </div>
                            <div id="vertime" class="yjbox" contenteditable="true" style="
									    width: 181px;
									    border: 1px solid #D9D9D9;
									    height: 32px;
									    font-family: FangSong;
										line-height:32px;"></div>
                            <div class="hour">(h)</div>
                        </div>
                        <div class="everybox">
                            <div class="yeji">是否通过:</div>
                            <div class="">
                                <select id="vercom" class="form-control  "
                                        style="width: 181px;height:32px;float: left;font-family: FangSong;">
                                    <option value="01">通过</option>
                                    <option value="02">不通过</option>
                                </select>
                            </div>
                        </div>
                        <div class="everybox2">
                            <div class="yeji ">审核说明:</div>
                            <div  style="" class="yejibigtext" >
                                <div id="versm" class="yejibigtextyjnr" style="font-family: FangSong;"contenteditable="true"
                                     onfocus="if(this.innerText=='添加您的审核内容...')this.innerText=''"
                                     onblur="if(this.innerText=='')this.innerText='添加您的审核内容...'">添加您的审核内容...</div>
                            </div>
                        </div>
                        <div style="margin-top: 15px;height: 9px;margin-bottom: 15px;position: relative;left: 72%;top: -10%;">
                            <div class="btnn" style="background-color:#0099CC;color:white;cursor:pointer;" onclick="verifiers()">审核</div>
                            <div onclick="cancal3()" class="btnn" style=" border: 1px solid #EEEEEF;cursor:pointer;">取消</div>
                            <div></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <!--计划总结-->
        <div id="modal-form4" class="modal fade" aria-hidden="true">
            <div class="modal-dialog"style="margin-left: -2%;">
                <div class="modal-content" style="background-color: #FFFFFF">
                    <div class="modal-body">
                        <div class="row">
                            <div class="col-sm-12 ">
                                <h3 class="m-t-none m-b" style="font-family: FangSong;font-weight: 800;font-size: 15px;">发表总结</h3>
                                <input type="hidden" id="comid4" value=""/>
                                <div class="plan" style="background-color:#FBFBFB;position:relative;border: 1px solid #e7eaec;overflow: hidden;padding: 0 0 0;">
                                    <div class="work-hour"  style="border-bottom: 0px solid #e7eaec;;font-size: 12px;width:100%;float: left;line-height: 29px;" readonly="true" >
                                        <h4 style="font-weight: 100;padding: 8px 10px 0;">您的评价非常宝贵，请认真对待~</h4>
                                        <ul style="list-style:none;padding: 5px 10px;color: #1D82D2;">
                                            <li style="margin-bottom: 10px" id="company">公司层面:<img value="5" src="/static/img/图层-14.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="3" src="/static/img/图层-15.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="1" src="/static/img/图层-16.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="0" src="/static/img/图层-17.png" style="width: 30px;margin-left: 25px;"></li>
                                            <li style="margin-bottom: 10px" id="manager">管理方便:<img value="5" src="/static/img/图层-14.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="3" src="/static/img/图层-15.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="1" src="/static/img/图层-16.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="0" src="/static/img/图层-17.png" style="width: 30px;margin-left: 25px;"></li>
                                            <li style="margin-bottom: 10px" id="work">工作方面:<img value="5" src="/static/img/图层-14.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="3" src="/static/img/图层-15.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="1" src="/static/img/图层-16.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="0" src="/static/img/图层-17.png" style="width: 30px;margin-left: 25px;"></li>
                                            <li id="envir">工作环境:<img value="5" src="/static/img/图层-14.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="3" src="/static/img/图层-15.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="1" src="/static/img/图层-16.png" style="opacity:0.4;width: 30px;margin-left: 25px;"><img value="0" src="/static/img/图层-17.png" style="width: 30px;margin-left: 25px;"></li>
                                        </ul>
                                    </div>
                                </div>
                                <div id="summarize" contenteditable="true" style="background-color:#FBFBFB;padding: 8px 8px 0;border-top: 0px;border:1px solid #e7eaec;min-height: 100px;" onfocus="if(this.innerText=='讲讲您宝贵的意见...')this.innerText=''" onblur="if(this.innerText=='')this.innerText='讲讲您宝贵的意见...'">讲讲您宝贵的意见...</div>
                            </div>

                            <div >
                                <button  style="color:#73777A;background-color: #F5F5F6;margin-right: 15px;margin-top: 15px;width: 70px;float: right;" class="RoleOfdelete btn btn-primary  btn-sm" type="button" onclick="cancal4();" value="取消">取消</button>
                                <button  style="margin-right:3px;margin-top: 15px;width: 70px;float: right;" class="RoleOfdelete btn btn-primary  btn-sm" type="button" onclick="summarys();" value="发表">发表</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 名字选择模态框部分-->
        <div id="personselect" class="modal fade" aria-hidden="true" style="overflow-y: hidden" >
            <div class="modal-dialog">
                <div class="modal-content" style="margin-left: -113px;width:800px;background-color: #FFFFFF;">
                    <div class="modal-body">
                        <div class="row" >
                            <div id="tree" class="col-sm-4" style="overflow-y: scroll;overflow-x: hidden;width: 30%"></div>
                            <div class="col-sm-8" style="width: 70%">
                                <div class="myText-content" style="margin-left: 0;width:100%;margin-bottom: 10px">
                                    <input id="key" type="text" style="outline: none;float: left;height:33px;width: 78%;" class="form-control" placeholder="请输入要搜索的姓名或员工编号">
                                    <button id="search" type="button" class="btn btn-primary" style="line-height: 19px;border-radius: 0;width: 20%;background-color:#0099CC">搜索</button>
                                </div>
                                <div id="table2"></div>
                            </div>
                            <div style="overflow: hidden;width: 200px;position: absolute;top: 85%;left: 70%;">
                                <button id="closed" style="color:#73777A;background-color: #F5F5F6;margin-right: 15px;margin-top: 15px;width: 70px;float: right;" class="RoleOfdelete btn btn-primary  btn-sm" type="button" onclick="closePage();" value="取消">取消</button>
                                <button id="commit" style="margin-right:3px;margin-top: 15px;width: 70px;float: right;" class="RoleOfdelete btn btn-primary  btn-sm" type="button" onclick="chose();" value="发布">确认</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>

<!-- js初始化 -->
<script>
    //如需刷新iframe，则只需把window替换为响应的iframe的 属性值或ID属性值
    $(function () {
        $("#kntype").val("01");
        $("a").tooltip();
        $(":button").tooltip();
        $("#top").click(function () {
            var speed=200;//滑动的速度
            $('body,html').animate({ scrollTop: 0 }, speed);
            return false;
        });
        $("#big").show();
        $("#example").hide();
        var Request = new Object();
        now();
        before();
        personname();
        table();//业绩管理表格
        $("#paimingtable").show();
        $("#sxry").searchableSelect({width:85});
        $(".searchable-select").click(function () {
            $("#personselect").modal('show');
        });
        $("#personselect").find(".row").height($(document).height()-100);
        $('#table2').height($("#personselect").find(".row").height()-100);
        tree();
        $("#tree").height($(document).height()-110);
        tsignid();
        chaxunn();
        biaoqing();
        cancal4();
        planAnalytable();
        var sUserAgent = navigator.userAgent.toLowerCase();
        var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
        var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
        var bIsMidp = sUserAgent.match(/midp/i) == "midp";
        var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
        var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
        var bIsAndroid = sUserAgent.match(/android/i) == "android";
        var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
        var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";
        if (bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) {//如果是上述设备就会以手机域名打开
            // alert('手机端');
            clform="02";
        }else{//否则就是电脑域名打开
            // alert('电脑端');
            clform="01";
        }
        uploader = WebUploader.create({

            // 自动上传。
            auto: false,

            // swf文件路径
            swf: '/static/js/plugins/webuploader/Uploader.swf',

            // 选择文件的按钮。可选。
            // 内部根据当前运行是创建，可能是input元素，也可能是flash.
            pick: '#filePicker',

            duplicate :true,//是否可以重复上传

            fileSizeLimit: 10000*1024*1024, //限制图片大小，不可以超过

            compress: null,

            // 只允许选择文件，可选。
            accept: {
                title: 'Images',
                extensions: 'gif,jpg,jpeg,bmp,png',
                mimeTypes: 'image/jpg,image/jpeg,image/png'   //修改这行，加快上传文件框的打开速度
            }
        });
        picUpload('#fileList',80,80,'#filePicker',10000);
    });
    var clform;
    var sign_id;
    var userid;
    var clock_id;
    var num=0;
    var oldid;
    // 个人详情接口
    var myinfo;
    var sucompany ;var sumanage ;var suwork ;var suhygienism ;
    //用户名字下拉框
    function personname() {
        $.ajax({
            url:"/tuser/queryIdTuser",
            async:false,
            dataType:"json",
            type:"post",
            success:function (data) {
                userid=data.id;
                $.ajax({
                    url:"/Tjobinfo/queryOldUserid",
                    data:{"userid":userid},
                    async:false,
                    dataType:"json",
                    type:"post",
                    success:function (data) {
                        oldid=data[0].userid;
                    }, error:function (error) {
                        alert("数据丢失了，刷新下试试吧" + error.status);
                    }
                });
                myinfo=data;
                var a = "<option part="+data.id+" value="+data.username+">"+data.username+"</option>"
                $("#sxry").append(a);
            },
            error:function (error) {
                alert("数据丢失了，刷新下试试吧" + error.status);
            }
        });
    }
    var datatable;
    //格式化现在日期
    function now() {
        // 给input  date设置默认值
        var now = new Date();
        //格式化日，如果小于9，前面补0
        var day = "01";
        //格式化月，如果小于9，前面补0
        var month = ("0" + (now.getMonth() + 2)).slice(-2);
        var year =now.getFullYear();
        if(month >12){ month ="01"; year = now.getFullYear()+1};
        //拼装完整日期格式
        var today = year+"/"+(month)+"/"+(day) ;
        //完成赋值
        $('#Endtime0').val(today);
    }
    //格式化15天前的日期
    function before() {
        //十五天毫秒值：1209600000
        var date = new Date();
        var times = date.getTime();
        var now = new Date(times);
        //格式化日，如果小于9，前面补0
        var day = "01";
        //格式化月，如果小于9，前面补0
        var month = ("0" + (now.getMonth() + 1)).slice(-2);
        //拼装完整日期格式
        var today = now.getFullYear()+"/"+(month)+"/"+(day) ;
        //完成赋值
        $('#Begtime0').val(today);
    }
    function planAnalytable(){
        Request = GetRequest();
        //业绩分析进来
        var starttimefx = Request["begtime"];
        var endtimefx = Request["endtime"];
        var useridfx = Request["userid"];
        var namefx = Request["name"];
        console.log(starttimefx+","+endtimefx+","+useridfx+","+namefx)
        if(starttimefx !=null && endtimefx !=null  && namefx !=null){
            $("#sxry").siblings().find('.searchable-select-holder').html(namefx);
            $("#sxry").siblings().find('.searchable-select-holderappend').html(useridfx);
            var arr = starttimefx.split('-');
            var arr1 = endtimefx.split('-');
            var Begtime ="";
            var Endtime ="";
            for(var i=0;i<arr.length;i++){
                Begtime += arr[i]+"/";
            }
            Begtime = Begtime.substr(0, Begtime.length - 1);
            for(var i=0;i<arr1.length;i++){
                Endtime += arr1[i]+"/";
            }
            Endtime = Endtime.substr(0, Endtime.length - 1);
            $('#Begtime0').val(Begtime);
            $('#Endtime0').val(Endtime);
            chaxunn();
        }
    };
    //表格操作权限
    function operate(value,row,index){
        if($("#sxlx").find("option:selected").val() =="02" && row.verifierid==userid){
            if(row.status=="03"){
                return "<a href='javascript:void(0);' id="+row.id+" class='czbtn2' style='color:#0099CC;' onclick='verifier(this.id)'>审核</a>";
            }else{
                return "<a href='javascript:void(0);' class='czbtn' style='color:#595959;'>审核</a>";
            }
        }
        else if(row.userid==userid && $("#sxlx").find("option:selected").val() =="01"){
            if(row.status=="01"||row.status=="03"){
                return "<a href='javascript:void(0);' id="+row.id+" class='czbtn2' style='color:#0099CC;' onclick='finish(this.id)'>完成</a>";
            } else if(row.status=="02"){
                return "<a href='javascript:void(0);' id="+row.id+" class='czbtn2' style='color:#0099CC;' onclick='finish(this.id)'>未通过</a>";
            }else if(row.status=="04"){
                return "<a href='javascript:void(0);' id="+row.id+" class='czbtn2' style='color:#0099CC;' onclick='summary(this.id)'>总结</a>";
            }else if(row.status=="05"){
                return "<a href='javascript:void(0);' id="+row.id+" class='czbtn' style='color:#595959;'>已总结</a>";
            }
        }
    }
    //表格代码
    function table(){
        /*//计划详情
        function aFormatter(value, row, index) {
            index=index+1;
            return [
                "<a class='J_menuItem' data-index='0' style='margin-left: 5px;width: 50.69px;height:30px;color: #0099CC;' onclick=\"page('/planmanagementMess?id="+row.id+"&messid="+row.userid+"','计划管理')\">"+row.username+"</a>"
            ].join("")
        }*/
        window.operateEvents = {
            'click .RoleOfdelete': function (e, value, row, index) {
                alert(row.dno);
            },
            'click .RoleOfedit': function (e, value, row, index) {
                $("#editModal").modal('show');

            }
        };
        function formattext(value,row,index){

            if(JSON.stringify(row.plantext)!="null" && row.plantext.length>10){
                var b =JSON.stringify(row.plantext);
                b = b.substr(1,b.length-2);
                b=b.replace(/\\r/g,"");
                return value =b.replace(/<div\s*[^>]*>(.*?)<\/div>/g,"$1").replace(/<br>/ig,"").substr(0,10)+"..."
            }else {
                var b =JSON.stringify(row.plantext);
                b = b.substr(1,b.length-2);
                b=b.replace(/\\r/g,"");
                return value = b.replace(/<div\s*[^>]*>(.*?)<\/div>/g,"$1").replace(/<br>/ig,"");
            }
        }
        $('#table1').bootstrapTable({
            iconSize:"outline",
            toolbar:"#exampleTableEventsToolbar",
            url: "<%=request.getContextPath()%>/api/getDataList.do", // 获取表格数据的url
            cache: false, // 设置为 false 禁用 AJAX 数据缓存， 默认为true
            striped: true,  //表格显示条纹，默认为false
            pagination: true, // 在表格底部显示分页组件，默认false
            pageList: [5,10, 15], // 设置页面可以显示的数据条数
            pageSize: 5, // 页面数据条数
            pageNumber: 1, // 首页页码
            onClickCell:function(field, value, row, $element,event){
                if(field=="operate" || field=="tpranum"){

                }else{
                    page('/planmanagementMess?id='+row.id+'&messid='+row.userid,'计划管理');
                }

            },
            columns: [
                {
                    field: 'number',
                    title: '序号',
                    width:'4%' ,
                    align:'center',
                    formatter: function (value,row,index){
                        return index+1; //序号正序排序从1开始
                    }
                },
                {
                    field: 'username',
                    width:'8%' ,
                    title: '姓名',
                    align:'center',
                }, {
                    field: 'deparname',
                    width:'10%',
                    title: '部门',
                    align:'center',
                },{
                    field: 'starttime',
                    width:'10%',
                    title: '计划时间',
                    align:'center',
                    formatter: function (value,row,index){
                        return row.starttime.split(" ")[0].split("/")[0]+"年"+row.starttime.split(" ")[0].split("/")[1]+"月"+row.starttime.split(" ")[0].split("/")[2]+"日";
                    }
                },
                {
                    field: 'workhour',
                    width:'4%' ,
                    title: '计划业绩(h)',
                    align:'center',
                },{
                    field: 'workload',
                    width:'4%' ,
                    title: '计划用时(h)',
                    align:'center',
                },{
                    width:'12%' ,
                    field: 'plantext',
                    title: '计划内容',
                    align:'center',
                    formatter:formattext
                },
                {
                    field: 'status',
                    width:'5%' ,
                    title: '计划状态',
                    align:'center',
                    formatter: function (value,row,index){
                        if(row.status=="01"){
                            return "工作中";
                        }else if(row.status=="02"){
                            return "未通过";
                        }else if(row.status=="03"){
                            return "已完成";
                        }else if(row.status=="04"){
                            return "已审核 ";
                        }else if(row.status=="05"){
                            return "已总结";
                        }
                    }
                } , {
                    field: 'clstatus',
                    width:'5%' ,
                    title: '签到状态',
                    align:'center',
                    formatter: function (value,row,index){
                        if(row.clstatus=="01"){
                            return "正常";
                        }else if(row.clstatus=="02"){
                            return "迟到 ";
                        }else if(row.clstatus=="03"){
                            return "早退";
                        }
                    }
                } , {
                    field: 'clstatusp',
                    width:'5%' ,
                    title: '签退状态',
                    align:'center',
                    formatter: function (value,row,index){
                        if(row.clstatusp=="01"){
                            return "晚退";
                        }else if(row.clstatusp=="02"){
                            return "迟到 ";
                        }else if(row.clstatusp=="03"){
                            return "正常";
                        }
                    }
                } , {
                    field: 'tpranum',
                    width:'11%' ,
                    title: '点赞数  评论数',
                    align: 'center',
                    formatter: function (value,row,index){
                    if(row.dz=='0'||typeof(row.dz)=='undefined'){
            return [
                "<button  type='button' onclick=\"zan('"+row.id+"','"+row.userid+"')\" class='RoleOfdelete btn btn-primary  btn-sm' style='background-color: #0099CC;width: 50.69px;height:30px;' ><i id='zan"+row.id+"' class='glyphicon glyphicon-heart-empty' style='float:left;margin-left:7%;font-size:14px;'></i><p id='zan1"+row.id+"' style='float:left;margin-left:12%' >"+row.tpranum+"</p></button>"+
                "<button type='button' class='RoleOfdelete btn btn-primary  btn-sm' onclick=\"page('/planmanagementMess?id="+row.id+"&number="+index+"&dz="+row.dz+"&temp=1','"+row.username+"')\" style='margin-left: 5px;width: 50.69px;height:30px;background-color: #0099CC;' ><i class='glyphicon glyphicon-comment' ></i> <p id='pl1"+row.id+"' style='float:right;margin-left:11%'> "+row.comnum+"</p></button>"
            ].join('');
        }else{
            return [
                "<button  type='button' onclick=\"zan('"+row.id+"','"+row.userid+"')\" class='RoleOfdelete btn btn-primary  btn-sm' style='background-color: #0099CC;width: 50.69px;height:30px;' ><i id='zan"+row.id+"' class='glyphicon glyphicon-heart' style='float:left;margin-left:7%;font-size:14px;'></i><p id='zan1"+row.id+"' style='float:left;margin-left:12%;background-color: #0099CC' >"+row.tpranum+"</p></button>"+
                "<button type='button' class='RoleOfdelete btn btn-primary  btn-sm' onclick=\"page('/planmanagementMess?id="+row.id+"&number="+index+"&dz="+row.dz+"&temp=1','"+row.username+"')\" style='margin-left: 5px;width: 50.69px;height:30px;background-color: #0099CC;' ><i class='glyphicon glyphicon-comment' ></i> <p id='pl1"+row.id+"' style='float:right;margin-left:11%'> "+row.comnum+"</p></button>"

            ].join('');
        }
                }
                },{
                    field: 'operate',
                    title: '操作',
                    width:'10%' ,
                    align: 'center',
                    formatter: operate
                }
            ] ,
            data:datatable
        });
    }
    $(".fht-cell").remove();

    //获取主键signid
    function tsignid() {
        $.ajax({
            url:"/random/randomid",
            data:{},
            async:false,
            dataType:"json",
            type:"post",
            success:function (data) {
                sign_id=data.randomid;
            },
            error:function (error) {
                alert("计划图片上传失败" + error.status);
            }
        });
    }
    /* 查询 */
    function chaxunn(){
        var begtime = $('#Begtime0').val();
        var endtime = $('#Endtime0').val();
        var name = $(".searchable-select-holderappend").html();
        var plantype=$("#plantype2").val();
        var clstatus="";
        if($("#clstatus").val()!="00"){
            clstatus=$("#clstatus").val();
        }
        var status="";
        if($("#status").val()!="00"){
            status=$("#status").val();
        }
        var sxlx=$("#sxlx").val();
        var data={"begtime":begtime,"endtime":endtime,"loginname":name,"plantype":plantype,"clstatus":clstatus,"status":status,"type":sxlx};
        $.ajax({
            url:"/tplan/queryListTpraise",
            data:data,
            async:false,
            dataType:"json",
            type:"post",
            success:function (data) {
                datatable=data;
                $('#table1').bootstrapTable('load',datatable);
            },
            error:function (error) {
                alert("网络状况不佳，用户登录失败！" + error.status);
            }
        });
    }

    /* 重置 */
    function chongzhii(){
        now();
        before();
        $(".searchable-select-holder").html(myinfo.username);
        $(".searchable-select-holderappend").html(myinfo.id);
        $("#sxlx").val("01");
        $("#status").val("00");
        $("#clstatus").val("00");
        $("#plantype2").val("01");
        chaxunn();
    }
    //id -> 存放图片  width，height  存放图片尺寸宽高  id2 按钮  allMaxSize图片大小
    function picUpload(id,width,height,id2,allMaxSize){
        var flag = false;
        var $ = jQuery;
        $list = $(id);
        // 优化retina, 在retina下这个值是2
        ratio = window.devicePixelRatio || 1;
        // 缩略图大小
        thumbnailWidth = 80 * ratio;
        thumbnailHeight = 80 * ratio;
        allMaxSize = 8;//限制图片大小
        // 当有文件添加进来的时候
        uploader.on( 'fileQueued', function( file ) {
            var $li = $(
                '<li id="' + file.id + '" class="file-item thumbnail" style="float:left;">' +
                '<div class="delete" style="overflow: hidden;height:0px;width: 80px;position: fixed;background-color: black;opacity: 0.6"><i class="iconfont icon-guanbi-copy" style="float: left;cursor: pointer;font-size: 53px;margin-top: -29px;margin-left: 32px;width: 39px;color:white">关闭</i></div>' +
                '<img>' +
                '<div class="info">' + file.name + '</div>' +
                '</li>'
                ),
                $img = $li.find('img');
            $list.append( $li );
            $(".uploader-list").css("border-top","1px solid #eaece7");
            $(".uploader-list").css("padding","4px");
            // 创建缩略图
            uploader.makeThumb( file, function( error, src ) {
                if ( error ) {
                    $img.replaceWith('<span>不能预览</span>');
                    return;
                }

                //去掉默认的头像，清空图片名字的信息
                $('.webuploader-pick img').attr('src','')
                $('.file-item .info').empty();

                $img.attr( 'src', src );
            }, thumbnailWidth, thumbnailHeight );

            $li.on( 'mouseenter', function() {
                $(".delete").stop().animate({height: 15});
            });

            $li.on( 'mouseleave', function() {
                $(".delete").stop().animate({height: 0});
            });

            $li.on('click','.iconfont.icon-guanbi-copy' , function() {
                uploader.removeFile( file,true );
                num++;
                $li.remove();
                $(".delete").stop().animate({height: 0});
                if($(".fileList").size()<=0){
                    $(".uploader-list").css("border-top","");
                    $(".uploader-list").css("padding","");
                }
            })
        });


        uploader.on( 'uploadSuccess', function( file ) {
            $( '#'+file.id ).addClass('upload-state-done');
            /*uploader.removeFile(uploader.getFiles(),true);*/

            flag = true;
        });

        // 文件上传失败，现实上传出错。
        uploader.on( 'uploadError', function( file ) {
            var $li = $( '#'+file.id ),
                $error = $li.find('div.error');

            // 避免重复创建
            if ( !$error.length ) {
                $error = $('<div class="error"></div>').appendTo( $li );
            }

            //$error.text('上传失败');

        });

        // 完成上传完了，成功或者失败，先删除进度条。
        uploader.on( 'uploadComplete', function( file ) {
            num++;
            if(num==uploader.getFiles().length){
                $("#reset1").trigger("click");
            }
            $( '#'+file.id ).find('.progress').remove();

        });

        //  验证大小
        uploader.on("error",function (type){

            if(type == "Q_EXCEED_SIZE_LIMIT"){
                window.alert("系统提示:所选图片总大小不可超过" + allMaxSize + "个哦！");
            }

        });


        if(flag){
            alert("发布成功！");
        }
    }
    //解析url参数
    function GetRequest() {
        var url = location.search; //获取url中"?"符后的字串
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = decodeURI(strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }


    <!-- jeDate 插件 -->
    jeDate("#Searchtime",{
        format:"YYYY/MM/DD hh:mm:ss",
        isTime:false,
        minDate:"2014/09/19 00:00:00"
    });

    jeDate("#Begtime0",{
        format:"YYYY/MM/DD",
        isTime:false,
        minDate:"2014/09/19 00:00:00"
    });

    jeDate("#Endtime0",{
        format:"YYYY/MM/DD",
        isTime:false,
        minDate:"2014/09/19 00:00:00"
    });
    //进度条
    layui.use('slider', function(){
        var $ = layui.$
            ,slider = layui.slider;
        //默认滑块
        slider.render({
            elem: '#slideTest1',

        });
        //开启输入框
        slider.render({
            elem: '#slideTest8'
            ,input: true //输入框
            , change: function(value){
                // alert(value);
                console.log(value); //动态获取滑块数值
                $("#wcjd").val(value);
                //do something
            }
        });
    });

    //选项卡设置
    function page(url, title) {
        var nav = $(window.top.document).find('.J_menuTabs .page-tabs-content ');
        $(window.top.document).find('.J_menuTabs .page-tabs-content ').find(".J_menuTab.active").removeClass("active");
        $(window.top.document).find('.J_mainContent').find("iframe").hide();
        var iframe = '<iframe class="J_iframe" name="iframe10000" width="100%" height="100%" src="' + url + '" frameborder="0" data-id="' + url
            + '" seamless="" style="display: inline;"></iframe>';
        $(window.top.document).find('.J_menuTabs .page-tabs-content ').append(
            ' <a href="javascript:;" class="J_menuTab active" data-id="'+url+'">' + title + ' <i class="iconfont icon-guanbi-copy" style="font-size: 28px;color:#D8D9DA;float: right;margin-left: -10px;width: 20px;margin-top: -5px"></i></a>');
        $(window.top.document).find('.J_mainContent').append(iframe);
    }

    //树形图
    //关闭模态框
    function closePage(){
        $("#personselect").modal('hide');
    }
    //人员选择
    //初始化树形结构
    function tree() {
        $.ajax({
            url:"/Tdepartmentinfo/querySXJGTdepartmentinfo",
            data:{},
            async:false,
            dataType:"json",
            type:"post",
            success:function (data) {
                data.splice(0,0,{'text':'全部','nodeid':'01'});
                $('#tree').treeview({
                    data: data,         // 数据源
                    collapseIcon:"iconfont icon-xiangshangjiantou",
                    expandIcon:"iconfont icon-iconset0417",
                    color:"#000000",
                    backColor:"#FFFFFF",
                    href:"#node-1",
                    selectable:true,
                    state: {
                        checked:true,
                        disabled:true,
                        expanded:true,
                        selected:true
                    },
                    tags: ['available'],
                    onNodeChecked: function (event,data) {
                        alert(data.nodeid);
                    },
                    onNodeSelected: function (event, data) {
                        num2=data.nodeid;
                        name2=data.text;
                        $.ajax({
                            url:"/Tdepartmentinfo/queryTdepartmentTuser",
                            data:{"id":data.nodeid},
                            async:false,
                            dataType:"json",
                            type:"post",
                            success:function (data) {
                                table2();
                                $('#table2').bootstrapTable('load',data);
                                $("#tree").siblings().find(".pull-left.pagination-detail").css("left","19%");
                                $('#tree').siblings().find('.fixed-table-toolbar').remove();
                                /*$('#table2').parent().siblings(".fixed-table-container").height($(document).height()-50);*/
                            },
                            error:function (error) {
                                alert("数据丢失了，刷新下试试吧" + error.status);
                            }
                        });
                        $("#search").click(function () {
                            $.ajax({
                                url:"/Tdepartmentinfo/queryTdepartmentTuser",
                                data:{"id":data.nodeid,"username":$("#key").val()},
                                async:false,
                                dataType:"json",
                                type:"post",
                                success:function (data) {
                                    table2();
                                    $('#table2').bootstrapTable('load',data);
                                    $("#tree").siblings().find(".pull-left.pagination-detail").css("left","19%");
                                    $('#tree').siblings().find('.fixed-table-toolbar').remove();
                                    /*$('#table2').parent().siblings(".fixed-table-container").height($(document).height()-50);*/
                                },
                                error:function (error) {
                                    alert("数据丢失了，刷新下试试吧" + error.status);
                                }
                            });
                        })
                    }
                });
                $('#tree').treeview('collapseAll', { silent: true });
                $('#tree').find("ul li:first").click();
            },
            error:function (error) {
                alert("数据丢失了，刷新下试试吧" + error.status);
            }
        });


    }
    //初始化人员表格
    function table2() {
        $('#table2').bootstrapTable('destroy').bootstrapTable({
            /*showToggle:!0,
        showColumns:!0,*/
            iconSize: "outline",
            toolbar: "#exampleTableEventsToolbar",
            /* icons:{refresh:"glyphicon-repeat",toggle:"glyphicon-list-alt",columns:"glyphicon-list"},*/
            //url: "<%=request.getContextPath()%>/api/getDataList.do", // 获取表格数据的url
            /*showRefresh:true,*/
            cache: false, // 设置为 false 禁用 AJAX 数据缓存， 默认为true
            striped: true,  //表格显示条纹，默认为false
            checkboxHeader:0,
            singleSelect : true, // 单选checkbox
            columns: [
                {
                    field: "state",
                    checkbox: true,
                    align: 'center',
                }, {
                    field: 'usernumber',
                    title: '姓名',
                    align: 'center',
                    width: '25%',
                },{
                    field: 'username',
                    title: '姓名',
                    align: 'center',
                    width: '25%',
                }, {
                    field: 'sex',
                    title: '性别',
                    align: 'center',
                    width: '10%',
                }, {
                    field: 'age',
                    title: '年龄',
                    align: 'center',
                    width: '28%',
                }, {
                    field: 'phone1',
                    title: '联系电话',
                    align: 'center',
                    width: '30%',
                }],
            data: []
        });
    }
    //人员选择确认
    function chose() {
        var selectContent = $('#table2').bootstrapTable('getSelections');
        if(selectContent.length ==1){
            var num1 = selectContent[0].id;
            var name1 = selectContent[0].username;
            $('.searchable-select-holder').html(name1);
            $('.searchable-select-holderappend').html(num1);
        }else{
            $("#sxry").siblings().find('.searchable-select-holder').html(name2);
            $("#sxry").siblings().find('.searchable-select-holderappend').html(num2);
        }
        $("#personselect").modal('hide');
    }
    //打开发布计划框
    function fabu() {
        $("#issue").html("发布");
        $("#modal-form").modal('show');
        $(".modal-dialog").show();
    }
    function cancal() {
        $("#modal-form").modal('hide');
        $("#fbjhyj").html("");
        $("#fbjhys").html("");
        $("#yjnr").html("");
        $("#planning").html("");
        $("#plantype").val("");
        $("#Searchtime").val("");
        $("#fbsm").html("");
        $("#issueid").val("");
    }
    function cancal2() {
        $("#modal-form2").modal('hide');
    }
    function cancal3() {
        $("#modal-form3").modal('hide');
    }
    function cancal4() {
        $("#modal-form4").modal('hide');
        $("#personselect").modal('hide');
        $("#summarize").html("讲讲您宝贵的意见...");
        $("#envir").find("img[value=5]").css("opacity","").siblings().css("opacity","0.4");
        $("#work").find("img[value=5]").css("opacity","").siblings().css("opacity","0.4");
        $("#manager").find("img[value=5]").css("opacity","").siblings().css("opacity","0.4");
        $("#company").find("img[value=5]").css("opacity","").siblings().css("opacity","0.4");
    }
    /*计划发布*/
    function issue() {
        var workhour= $("#fbjhyj").html();
        var workload=$("#fbjhys").html();
        var plantext=$("#yjnr").html();
        var planning=$("#planning").html();
        var plantype=$("#plantype").val();
        var starttime=$("#Searchtime").val();
        var prospectus=$("#fbsm").html();
        var issueid=$("#issueid").val();
        if(issueid==""||issueid==null){
            $.ajax({
                url:"/clock/insertClock",
                data:{"clform":clform,"cltype":"01","Clremark":"","tsignid":sign_id,"cltime":starttime,"plantype":plantype},
                async:false,
                dataType:"json",
                type:"post",
                success:function (data) {
                    console.log(data)
                    if(data.code!=404){
                        if(data.code==200){
                        $.ajax({
                            url:"/tplan/InsertPlan",
                            data:{"workhour":workhour,"workload":workload,"plantext":plantext,"planning":planning,"plantype":plantype,"prospectus":prospectus,"starttime":starttime,"clockid":data.id},
                            async:false,
                            dataType:"json",
                            type:"post",
                            success:function (data) {
                                alert("发布成功");
                                cancal();
                                chaxunn();
                                if($("#fileList").html()!=""){
                                    console.log("上传...");
                                    uploader.option('server','/file/saveFileupload');
                                    uploader.option('formData',{'itemtype':'tplan','itemid':data.id,'attfrom':"01"});
                                    uploader.upload();   //执行手动提交
                                    console.log("上传成功");

                                }
                                $("#fileList").html("");
                            },
                            error:function (error) {
                                alert("网络状况不佳，用户登录失败！" + error.status);
                            }
                        });
                        console.log(data)

                        }else{
                            alert("未知错误，请刷新重试")
                        }
                    }else{
                        alert(data.msg);
                    }
                },
                error:function (error) {
                    alert("网络状况不佳，用户登录失败！" + error.status);
                }
            });
            $("#issueid").val("");
        }
    }
    <!-- 计划完成接口-->
    function finish(id){
        $("#modal-form2").modal('show');
        $(".modal-dialog").show();
        $("#comid").val(id);
        var data = {"id":id}
        $.ajax({
            url:"/tplan/QueryPlanListByid",
            data: data,
            async:false,
            dataType:"json",
            type:"post",
            success:function (data) {
                for(var i=0;i<data.length;i++){
                    $("#fbjhyj2").html(data[i].workhour);
                    $("#fbjhys2").html(data[i].workload);
                    $("#yjnr2").html(data[i].plantext);
                    $("#planning2").html(data[i].planning);
                    if(data[i].plantype=="01"){
                        $("#plantype22").html("日计划");
                    }else if(data[i].plantype=="02"){
                        $("#plantype22").html("周计划");
                    }else if(data[i].plantype=="03"){
                        $("#plantype22").html("月计划");
                    }else if(data[i].plantype=="04"){
                        $("#plantype22").html("年计划");
                    }
                    $("#Searchtime2").html(data[i].starttime);
                    $("#fbsm2").html(data[i].prospectus);
                    $("#comtime").html(data[i].comtime);
                    $("#comsm").html(data[i].completetext);
                    $("#complan").html(data[i].complan);
                }
            },
            error:function (error) {
                alert("网络状况不佳，用户登录失败！" + error.status);
            }
        })
    }
    <!-- 计划审核接口-->
    function verifier(id){
        $("#modal-form3").modal('show');
        $(".modal-dialog").show();
        $("#comid3").val(id);
        var data = {"id":id}
        $.ajax({
            url:"/tplan/QueryPlanListByid",
            data: data,
            async:false,
            dataType:"json",
            type:"post",
            success:function (data) {
                for(var i=0;i<data.length;i++){
                    $("#fbjhyj3").html(data[i].workhour);
                    $("#fbjhys3").html(data[i].workload);
                    $("#yjnr3").html(data[i].plantext);
                    $("#planning3").html(data[i].planning);
                    if(data[i].plantype=="01"){
                        $("#plantype23").html("日计划");
                    }else if(data[i].plantype=="02"){
                        $("#plantype23").html("周计划");
                    }else if(data[i].plantype=="03"){
                        $("#plantype23").html("月计划");
                    }else if(data[i].plantype=="04"){
                        $("#plantype23").html("年计划");
                    }
                    $("#Searchtime3").html(data[i].starttime);
                    $("#fbsm3").html(data[i].prospectus);
                    $("#comtime3").html(data[i].comtime+"h");
                    $("#comsm3").html(data[i].completetext);
                    $("#complan3").html(data[i].complan);
                    $("#userid3").val(data[i].userid);
                    clock_id=data[i].clockid;
                }
            },
            error:function (error) {
                alert("网络状况不佳，用户登录失败！" + error.status);
            }
        })
    }
    <!-- 计划总结接口-->
    function summary(id) {
        $("#modal-form4").modal('show');
        $(".modal-dialog").show();
        $("#comid4").val(id);
    }
    //完成计划提交
    function complete() {
        var comtime=$("#comtime").html();
        var comsm=$("#comsm").html();
        var complan=$("#complan").html();
        var id=$("#comid").val();
        $.ajax({
            url:"/tplan/UpdatePlanByid",
            data: {"comtime":comtime,"completetext":comsm,"complan":complan,"id":id,"status":"03","complantime":getNewDate()},
            async:false,
            dataType:"json",
            type:"post",
            success:function (data) {
                alert("提交成功");
                $("#modal-form2").modal('hide');
                chaxunn();
                saveNews(oldid,"02","工作圈",comsm,id);
            },
            error:function (error) {
                alert("网络状况不佳，用户登录失败！" + error.status);
            }
        })
    }
    //审核计划提交
    function verifiers() {
        var vertime=$("#vertime").html();
        var versm=$("#versm").html();
        var verplan=$("#verplan").html();
        var vercom=$("#vercom").val();
        var id=$("#comid3").val();
        var userid3=$("#userid3").val();
        if(vercom=="01"){
            vercom="04";
        }else{
            vercom="02"
        }
        $.ajax({
            url:"/tplan/UpdatePlanByid",
            data: {"vertime":vertime,"verifiertext":versm,"verplan":verplan,"id":id,"status":vercom,"cltime":"000","verendtime":"0"},
            async:false,
            dataType:"json",
            type:"post",
            success:function (data) {
                alert("提交成功");
                $("#modal-form3").modal('hide');
                saveNews(userid3,"01","工作圈",versm,id);
                if(vercom=="04"){
                    $.ajax({
                        url:"/clock/UpdateClockByid",
                        data: {"id":clock_id,"cltype":"03","clformp":clform},
                        async:false,
                        dataType:"json",
                        type:"post",
                        success:function (data) {
                            chaxunn();
                            cancal3();
                        },
                        error:function (error) {
                            alert("网络状况不佳，用户登录失败！" + error.status);
                        }
                    })
                }
            },
            error:function (error) {
                alert("网络状况不佳，用户登录失败！" + error.status);
            }
        })
    }
    //总结计划提交
    function summarys() {
        var id=$("#comid4").val();
        if($("#summarize").html()!="讲讲您宝贵的意见..."){
            var sutext = $("#summarize").html();
        }else {
            var sutext = "";
        }
        if(typeof(sucompany)!="undefined" && typeof(suhygienism)!="undefined" && typeof(sumanage)!="undefined" && typeof(suwork) !="undefined"){
            var data = {"sutext": sutext, "sucompany": sucompany, "sumanage": sumanage,"id":id,"suwork":suwork,"suhygienism":suhygienism};
            $.ajax({
                url: "/tsummary/saveTsummary",
                data: data,
                async: false,
                dataType: "json",
                type: "post",
                success: function (data) {
                    if (data.code != 404) {
                        $("#summarize").html("讲讲您宝贵的意见...");
                        $("#envir").find("img[value=5]").css("opacity","").siblings().css("opacity","0.4");
                        $("#work").find("img[value=5]").css("opacity","").siblings().css("opacity","0.4");
                        $("#manager").find("img[value=5]").css("opacity","").siblings().css("opacity","0.4");
                        $("#company").find("img[value=5]").css("opacity","").siblings().css("opacity","0.4");
                        $("#modal-form4").modal('hide');
                        alert(data.msg);
                        chaxunn();
                        $.ajax({
                            url:"/tplan/UpdatePlanByid",
                            data: {"id":id,"status":"05"},
                            async:false,
                            dataType:"json",
                            type:"post",
                            success:function (data) {
                                $("#modal-form3").modal('hide');
                                chaxunn();
                            },
                            error:function (error) {
                                alert("网络状况不佳，用户登录失败！" + error.status);
                            }
                        })
                    } else {
                        alert(data.msg);
                    }
                },
                error: function (error) {
                    alert("234计划图片上传失败" + error.status);
                }
            });
        }else {
            alert("请对所有方面选择评价");
        }
    }
    /* 表情切换控制*/
    function biaoqing() {
        sucompany = 0;
        sumanage = 0;
        suwork = 0;
        suhygienism = 0;
        $("#company").find("img").click(function () {
            $(this).css("opacity","");
            sucompany = $(this).attr("value");
            $(this).siblings().css("opacity","0.4");
        });
        $("#manager").find("img").click(function () {
            $(this).css("opacity","");
            sumanage = $(this).attr("value");
            $(this).siblings().css("opacity","0.4");
        });
        $("#work").find("img").click(function () {
            $(this).css("opacity","");
            suwork = $(this).attr("value");
            $(this).siblings().css("opacity","0.4");
        });
        $("#envir").find("img").click(function () {
            $(this).css("opacity","");
            suhygienism = $(this).attr("value");
            $(this).siblings().css("opacity","0.4");
        });

    }
    /* 点赞*/
    function zan(id,zanid) {
        console.log(id+"-----------idididid");
        if($("#zan"+id).hasClass("glyphicon glyphicon-heart-empty")){
            var data = {"itemid":id,"itemtype":"tplan"};
            $.ajax({
                url:"/tpraise/savetpraise",
                data: data,
                async:false,
                dataType:"json",
                type:"post",
                success:function (data) {
                    if(data.code!='404'){
                        $("#zan"+id).attr("class","glyphicon glyphicon-heart");
                        var a =$("#zan1"+id).text();
                        var num = parseInt(a)+1;
                        $("#zan1"+id).text(num);
                        $("#zan2"+id).attr("class","glyphicon glyphicon-heart");
                        var a =$("#zan3"+id).text();
                        var num = parseInt(a)+1;
                        $("#zan3"+id).text(num);
                        saveNews(zanid,"03","工作圈",id);
                    }else{
                        alert(data.msg);
                    }
                },
                error:function (error) {
                    alert("网络状况不佳，用户登录失败！" + error.status);
                }
            });
        }else {
            var data = {"itemid":id};
            $.ajax({
                url:"/tpraise/deleteIdTpraise",
                data: data,
                async:false,
                dataType:"json",
                type:"post",
                success:function (data) {
                    if(data.code!='404'){
                        $("#zan"+id).attr("class","glyphicon glyphicon-heart-empty");
                        var a = $("#zan1"+id).text();
                        var num = parseInt(a)-1;
                        $("#zan1"+id).text(num);
                        $("#zan2"+id).attr("class","glyphicon glyphicon-heart-empty");
                        var a = $("#zan3"+id).text();
                        var num = parseInt(a)-1;
                        $("#zan3"+id).text(num);
                    }else{
                        alert(data.msg);
                    }

                },
                error:function (error) {
                    alert("网络状况不佳，用户登录失败！" + error.status);
                }
            });


        }

    }
    //获取现在时间
    function getNewDate() {
        var date=new Date();
        var year=date.getFullYear();
        var month=date.getMonth()+1;
        var day=date.getDate();
        var hours=date.getHours();
        var minu=date.getMinutes();
        var seconds=date.getSeconds();
        if(month<10){
            month="0"+month;
        }
        if(day<10){
            day="0"+day;
        }
        if(hours<10){
            hours="0"+hours;
        }
        if(minu<10){
            minu="0"+minu;
        }
        if(seconds<10){
            seconds="0"+seconds;
        }
        return year+"/"+month+"/"+day+" "+hours+":"+minu+":"+seconds;
    }
</script>
</html>
